<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>RocketSlide</title>
	<meta name="theme-color" content="#233f78">
	<link rel="manifest" href="/manifest.json">
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="./css/font-awesome.min.css">
	<link rel="stylesheet" href="./css/pptx2html.css">
	<link rel="stylesheet" href="./css/custom.css" />
	<link href="https://fonts.googleapis.com/css?family=Fredoka+One" rel="stylesheet">
	<script src="./js/jquery-3.3.1.js"></script>
	<script src="./js/socket.io.slim.js"></script>
	<script type="text/javascript" src="./js/FileSaver.min.js"></script>
	<script type="text/javascript" src="./js/lz-string.min.js"></script>
	<script type="text/javascript" src="./js/qrcode.min.js"></script>
	<script type="text/javascript" src="./js/bootstrap.min.js"></script>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	< <script async src="https://www.googletagmanager.com/gtag/js?id=UA-116062531-1"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() { dataLayer.push(arguments); }
			gtag('js', new Date());

			gtag('config', 'UA-116062531-1');
			function getBrowserName() {
				var name = "Unknown";
				if (navigator.userAgent.indexOf("MSIE") != -1) {
					name = "MSIE";
				}
				else if (navigator.userAgent.indexOf("Firefox") != -1) {
					name = "Firefox";
				}
				else if (navigator.userAgent.indexOf("Opera") != -1) {
					name = "Opera";
				}
				else if (navigator.userAgent.indexOf("Chrome") != -1) {
					name = "Chrome";
				}
				else if (navigator.userAgent.indexOf("Safari") != -1) {
					name = "Safari";
				}
				return name;
			}
			if (getBrowserName() == "Safari") {
				alert("Recomendamos que utilize o Google Chrome");
			}
			if (window.location.protocol != 'https:' && window.location.host != "localhost" && window.location.host != "192.168.1.5") {
				location.href = location.href.replace("http://", "https://");
			}
		</script>
		<style>
			.btn_slides {
				display: none;
			}

			svg path,
			svg rect {
				fill: #FF6700;
			}

			.banner {
				margin-top: 16%;
				height: 250px;
				width: 350px;
				background-color: black;
			}
		</style>
		<script>
			/*if ('serviceWorker' in navigator) {
				navigator.serviceWorker.register("./sw.js")
					.then((reg) => {
						console.log(reg);
					}).catch(err => console.log("<@@", err));
			}*/
			$(document).ready(function () {
				var content = $('.content');
				var currentItem = content.filter('.active');
				var steps = $('.card').filter('.steps');
				var inactive1 = $('.inactive-1');
				var inactive2 = $('.inactive-2');
				$('.button').click(function () {
					var nextItem = currentItem.next();
					var lastItem = content.last();
					var contentFirst = content.first();
					currentItem.removeClass('active');
					if (currentItem.is(lastItem)) {
						currentItem = contentFirst.addClass('active');
						currentItem.css({ 'right': '10%', 'opacity': '1' });
						$('.step').animate({ width: '33%' });
						inactive1.animate({ height: '8px', marginLeft: '20px', marginRight: '20px' }, 100);
						inactive2.animate({ height: '8px', marginLeft: '10px', marginRight: '10px' }, 100);

					} else if (currentItem.is(contentFirst)) {
						currentItem.animate({ opacity: 0 }, 1000);
						currentItem = nextItem.addClass('active');
						$('.step').animate({ width: '66%' });
						inactive2.animate({ height: '0', marginLeft: '0px', marginRight: '0px' }, 100);

					} else {
						currentItem = nextItem.addClass('active');
						$('.step').animate({ width: '100%' });
						inactive1.animate({ height: '0', marginLeft: '0px', marginRight: '0px' }, 100);
					}
				});
			});
			var io = io("https://webapp.mactus.com.br/");
			function isMobile() {
				if (navigator.userAgent.match(/Android/i)
					|| navigator.userAgent.match(/webOS/i)
					|| navigator.userAgent.match(/iPhone/i)
					|| navigator.userAgent.match(/iPad/i)
					|| navigator.userAgent.match(/iPod/i)
					|| navigator.userAgent.match(/BlackBerry/i)
					|| navigator.userAgent.match(/Windows Phone/i)
				) {
					return true;
				}
				else {
					return false;
				}
			}
			function generateHexString(length) {
				var ret = "";
				while (ret.length < length) {
					ret += Math.random().toString(16).substring(2);
				}
				return ret.substring(0, length);
			}
			var input_token = "";
			let token = "";
			$(document).ready(function () {
				$(".origin").html(window.location.origin);
				if (isMobile()) {
					if (navigator.userAgent.match(/iPhone/i)) {
						$(".allow_scan").css("display", "none");
					}

					$("body").css("background-color", "#391aa2");
					$("#smartphone").css("display", "block");

					if (window.localStorage.getItem("INPUT_TOKEN_QR")) {
						input_token = window.localStorage.getItem("INPUT_TOKEN_QR");
						io.emit("action", input_token);
						$("#formulario_token").css("display", "none");
						$("#scan").css("display", "none");
						$(".btn_slides").css("display", "block");
						$("#logout").css("display", "block");
					}
				} else {
					token = generateHexString(6);
					window.localStorage.setItem("TOKEN_SOCKET", token);
					$("#desktop").css("display", "block");
					$("#token").html(token);
					var qrcode = new QRCode(token);
					var svg = qrcode.svg();
					document.getElementById("img_qrcode").innerHTML = svg;
					io.on(token, function (data) {
						switch (data.action) {
							case "OPEN_VIEW":
								$("#carregando").css("display", "block");
								setInterval(() => $("#to-reveal-btn").click(), 1000);
								break;
						}
					});

				}
				$("#btn_next").click(function () {
					io.emit("nextSlide", input_token);
				});
				$("#btn_previous").click(function () {
					io.emit("previousSlide", input_token);
				});
				$("#conectar").click(function () {
					input_token = $("#input_token").val();
					//possivel retirada
					io.emit("action", input_token);
					$("#formulario_token").css("display", "none");
					$("#scan").css("display", "none");
					$(".btn_slides").css("display", "block");
					$("#logout").css("display", "block");
					//
				});
				$("#scan").click(function () {
					window.location.href = "./qrcode/dist";
				});
				$("#logout").click(function () {
					io.emit("close", input_token);
					window.localStorage.clear();
					window.location.reload();
				});
				$('#myModal').on('shown.bs.modal', function () {
					$('#myInput').focus()
				})
			});
		</script>
</head>

<body>
	<div style="display:none;" id="desktop">
		<div class="ct" id="t1">
			<div class="ct" id="t2">
				<div class="ct" id="t3">
					<div class="ct" id="t4">
						<div class="ct" id="t5">
							<div class="page" id="p1">
								<div style="top: -10px;position: relative;">
									<h1 style="font-family: 'Fredoka One', cursive;padding-top:20px;text-align: center;font-family: monospace;letter-spacing: 5px;color:rgb(243, 84, 44);">
										<img src="./img/icon-62x62.png" /> &nbsp;RocketSlide
									</h1>
								</div>
								<section style="width: 80%;height: 497px;top: 8%;background-color:aliceblue;margin-left: 3%;margin-right: 0%;" class="icon">
									<!-- 1 -->
									<div class="row">
										<div class="col-md-6 col-md-offset-3" style="text-align: center;">
											<div class="btn-group">
												<div style="background-color: #233f78;" class="fileUpload btn btn-primary">
													<span>
														<i class="glyphicon glyphicon-upload"></i> Selecione o arquivo PowerPoint 2010+</span>
													<input id="uploadBtn" type="file" class="upload" accept="application/vnd.openxmlformats-officedocument.presentationml.presentation"
													/>
													<input id="to-reveal-btn" type="hidden" />
												</div>

											</div>
										</div>
										<div class="col-md-offset-2">
											<div id="carregando" style="display: none;">
												<span style="color:#e97040;font-size:25px;bottom:10px;position: relative;">Carrregando</span>
												<svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
												 width="40px" height="40px" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve">
													<path fill="#000" d="M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z">
														<animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"
														/>
													</path>
												</svg>
											</div>
										</div>
										<div class="col-md-offset-1"></div>
									</div>
									<div class="row">
										<div class="col-lg-3">
											<div style="margin-left:17%;" class="banner">

											</div>
										</div>
										<div class="col-lg-6">
											<div style="display: none;" class="grupo_elementos">
												<div class="progress">
													<div style="color:black;" id="load-progress" class="progress-bar progress-bar-striped" style="transition: none;" role="progressbar"
													 aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
														0%
													</div>
												</div>
												<div>
													<div style="text-align: center;" id="img_qrcode" data-toggle="collapse" data-target="#collapseExample" aria-controls="collapseExample">

													</div>
													<div style="text-align: center;color:black;">
														<h4 style="font-weight: bold;">Código:
															<span id="token"></span>
														</h4>
													</div>
												</div>
											</div>

											<div class="requirimentos" style="font-size: 20px;color:#070201;">
												<div class="inner-container">
													<div class="card inactive-1"></div>
													<div class="card inactive-2"></div>
													<div class="card">
														<div class="content active">
															<br>
															<h1>Passo 1</h1>
															<p>Abra este website em seu smartphone
																<i class="em em-coffee"></i>
															</p>
															<a class="button" href="#">Proximo passo &rarr;</a>
														</div>
														<div class="content">
															<br>
															<h1>Passo 2</h1>
															<p>Selecione o arquivo PowerPoint 2010+</p>
															<a class="button" href="#"> Proximo Passo &rarr;</a>
														</div>
														<div class="content">
															<br>
															<h1>Passo 3</h1>
															<p>
																Scaneie o QR Code com o smartphone
															</p>
															<a class="button" href="#">Apresente &rarr;</a>
														</div>
														<div class="progress-container">
															<div class="step"></div>
														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="col-lg-3">
											<div style="margin-left:-41%;" class="banner">
												<div style="color:white">

												</div>
											</div>
										</div>
									</div>
								</section>
							</div>
							<div class="page" id="p2">
								<section style="width: 80%;height: 497px;top: 8%;background-color: #415fc1b8;border-color: red;border: 1px solid black;box-shadow: 1px 1px 1px black;"
								 class="icon">
								</section>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div style="display:none;" class="row">
			<div class="col-lg-12">
				<div id="error_block" class="alert alert-danger hidden">
					You will need a recent browser to use this demo :(
				</div>
				<div id="info_block" class="alert alert-success" role="alert">

				</div>
				<div id="result_block" class="hidden">
					<h3>Slides:</h3>
					<div id="result"></div>
				</div>
			</div>
		</div>
	</div>

	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript" src="js/pptx2html.js"></script>

	<link rel="stylesheet" href="css/nv.d3.min.css">
	<script type="text/javascript" src="js/chart/d3.min.js"></script>
	<script type="text/javascript" src="js/chart/nv.d3.min.js"></script>
	</div>
	<div style="display: none;" id="smartphone">

		<div id="formulario_token" class="col-sm-12" style="padding:20px;">
			<label style="color:white;">Iniciar Sessão</label>
			<div class="input-group">
				<input placeholder="Digite o código de sessão" type="text" id="input_token" class="form-control" />
				<div class="input-group-btn">
					<button style="background-color:#233f78" id="conectar" class="btn btn-primary">
						<span style="font-weight: bold;font-size: 15px;">Conectar</span>
					</button>
				</div>
			</div>
			<div class="allow_scan">
				<label style="padding-left:45%;">Ou</label>
				<button style="background-color:#233f78" class="btn-lg btn-primary btn-block" id="scan">
					<span style="font-weight: bold;font-size: 25px;">Scannear Código</span>
				</button>
			</div>

		</div>

		<button style="display:none;" class="btn-lg btn-block btn-danger" id="logout">Encerrar Sessão</button>
		<div style="position:relative;padding-top: 20px;">
			<h1 style="font-family: 'Fredoka One', cursive;color:rgb(243, 84, 44);letter-spacing: 5px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RocketSlide</h1>
		</div>


		<div class="btn_slides">
			<div style="position: fixed;left: 0;bottom: 0;width: 105%;background-color:transparent;padding-bottom: 20px;padding-left: 11px;"
			 class="row">
				<div class="col-xs-6" style="margin:0;padding: 0;">
					<div id="btn_previous" style="border-radius: 100%;background-color: #233f78;border: 1px solid rgb(0, 0, 0);width: 90%;height: 165px;padding: 50px;text-align: center;margin-left: 19px;">
						<i style="color:white;font-size:68px;" class="fa fa-fast-backward" aria-hidden="true"></i>
					</div>
				</div>
				<div class="col-xs-6" style="margin:0;padding: 0;">
					<div id="btn_next" style="border-radius: 100%;background-color: #233f78;border: 1px solid rgb(0, 0, 0);width: 90%;height: 165px;padding: 50px;text-align: center;">
						<i style="color:white;font-size:68px;" class="fa fa-fast-forward" aria-hidden="true"></i>
					</div>
				</div>
			</div>
		</div>

	</div>

</body>

</html>